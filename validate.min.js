var Validate=function(){"use strict";return Validate=function(){},Validate.prototype.validate=function(t,e){if(""===t&&"noempty"!=e)return!0;switch(e){case"int":case"integer":return this.isInt(t);case"float":return this.isFloat(t);case"number":return this.isNumber(t);case"alpha":case"text":return this.isAlpha(t);case"text-":return this.isAlphaGuion(t);case"alphaNumericSpace":case"textspace":return this.isAlphaNumericSpace(t);case"alphaNumeric":case"textnum":return this.isAlphaNumeric(t);case"email":return this.isEmail(t);case"iccid":return this.checkICCID(t);case"nummovil":return this.checkNumMovil(t);case"numfijo":return this.checkNumFijo(t);case"tel":return this.checkTelephoneNumber(t);case"cp":return this.checkCodPostal(t);case"cuentabancaria":return this.verificaCuentaBancaria(t);case"tarjetacredito":return this.verificaNumTarjetaCredito(t);case"nif":case"cif":case"nie":return valida_nif_cif_nie(t);case"fecha":return isDate(t,"dmy");case"selected":case"noempty":return""!==t}return!1},Validate.prototype.isInt=function(t){return t==parseInt(t)},Validate.prototype.isFloat=function(t){return t==parseFloat(t)},Validate.prototype.isNumber=function(t){var e=/^[0-9\.]+$/;return e.test(t)},Validate.prototype.isEmail=function(t){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(t)},Validate.prototype.verificaCuentaBancaria=function(t){for(var e="00"+t.substr(0,8),r=t.substr(8,2),a=t.substr(10),n=new Array(1,2,4,8,5,10,9,7,3,6),i=0,s=0,o=0;9>=o;o++)i+=parseInt(e.charAt(o))*n[o];for(i=11-i%11,11==i&&(i=0),10==i&&(i=1),o=0;9>=o;o++)s+=parseInt(a.charAt(o))*n[o];return s=11-s%11,11==s&&(s=0),10==s&&(s=1),i.toString()+s.toString()==r},Validate.prototype.verificaNumTarjetaCredito=function(t){var e=!1,r=3==t[0]||4==t[0]||5==t[0]||6==t[0];return 16==t.length&&r&&(e=this._getCtrlNumberCreditCard(t)==t[15]),e},Validate.prototype._getCtrlNumberCreditCard=function(t){var e,r,a=0;for(e=1;16>e;e++)e/2!==parseInt(e/2)?(r=2*parseInt(t[e-1]),r>=10&&(r-=9)):r=parseInt(t[e-1]),a+=r;return a=10-a%10,10===a&&(a=0),a},Validate.prototype.isAlpha=function(t){var e=/^[A-Za-z\s\xF1\xD1áéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\']+$/,r=e.test(t);return r},Validate.prototype.isAlphaGuion=function(t){var e=/^[A-Za-z\s\xF1\xD1áéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\'\-]+$/,r=e.test(t);return r},Validate.prototype.isAlphaNumeric=function(t){var e=/^[0-9A-Za-záéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\']+$/,r=e.test(t);return r},Validate.prototype.isAlphaNumericSpace=function(t){var e=/^[0-9A-Za-z\s\xF1\xD1áéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\']+$/,r=e.test(t);return r},Validate.prototype.isDate=function(t,e){var r=t;if(""===r)return!1;var a=/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/,n=r.match(a);if(null===n)return!1;switch(e){case"mdy":dtMonth=n[1],dtDay=n[3],dtYear=n[5];break;case"ymd":dtYear=n[1],dtMonth=n[5],dtDay=n[7];break;default:dtDay=n[1],dtMonth=n[3],dtYear=n[5]}if(dtMonth<1||dtMonth>12)return!1;if(dtDay<1||dtDay>31)return!1;if((4==dtMonth||6==dtMonth||9==dtMonth||11==dtMonth)&&31==dtDay)return!1;if(2==dtMonth){var i=dtYear%4===0&&(dtYear%100!==0||dtYear%400===0);if(dtDay>29||29==dtDay&&!i)return!1}return!0},Validate.prototype.checkNumMovil=function(t){var e=/^[67]\d{8}$/,r=new RegExp(e);return r.test(t)?1:0},Validate.prototype.checkNumFijo=function(t){var e=/^[89]\d{8}$/,r=new RegExp(e);return r.test(t)?1:0},Validate.prototype.checkTelephoneNumber=function(t){return this.checkNumFijo(t)||this.checkNumMovil(t)?1:-2},Validate.prototype.checkCodPostal=function(t){return 5==t.length&&this.isInt(t)},Validate.prototype.checkICCID=function(t){var e=parseInt(t.substring(t.length-1,t.length)),r=t.substring(0,t.length-1);return"89"!=t.substring(0,2)?0:this._CalculateLuhn(r)==parseInt(e)&&(19==t.length||20==t.length)?1:0},Validate.prototype._CalculateLuhn=function(t){var e=0;for(i=0;i<t.length;i++)e+=parseInt(t.substring(i,i+1));var r=new Array(0,1,2,3,4,-4,-3,-2,-1,0);for(i=t.length-1;i>=0;i-=2){var a=parseInt(t.substring(i,i+1)),n=r[a];e+=n}var s=e%10;return s=10-s,10==s&&(s=0),s},Validate.prototype.calcDigitoControl2LineaNIF=function(t){for(var e=[7,3,1],r=0,a=0,n=t.length;n>r;r++)a+=t[r]*e[r%3];return a%10},Validate.prototype._getLetraNIF=function(t){var e="TRWAGMYFPDXBNJZSQVHLCKE",r=t%23,a=e.charAt(r);return a},Validate.prototype.valida_nif_cif_nie=function(t){var e,r,a,n,i,s,o,c,u,d=t.toUpperCase(),l="TRWAGMYFPDXBNJZSQVHLCKE";if("PASAPORTE"==$("#documento_de_identidad").val())return 1;if(""!==d){if(!/^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$/.test(d)&&!/^[T]{1}[A-Z0-9]{8}$/.test(d)&&!/^[0-9]{8}[A-Z]{1}$/.test(d))return 0;if(/^[0-9]{8}[A-Z]{1}$/.test(d))return s=t.substring(8,0)%23,o=l.charAt(s),c=d.charAt(8),o==c?1:-1;for(u=parseInt(t.charAt(2))+parseInt(t.charAt(4))+parseInt(t.charAt(6)),a=1;8>a;a+=2)e=2*parseInt(t.charAt(a)),e+="",e=e.substring(0,1),r=2*parseInt(t.charAt(a)),r+="",r=r.substring(1,2),""===r&&(r="0"),u+=parseInt(e)+parseInt(r);if(u+="",n=10-parseInt(u.substring(u.length-1,u.length)),/^[KLM]{1}/.test(d))return t.charAt(8)==String.fromCharCode(64+n)?1:-1;if(/^[ABCDEFGHJNPQRSUVW]{1}/.test(d))return d=n+"",t.charAt(8)==String.fromCharCode(64+n)||t.charAt(8)==parseInt(d.substring(d.length-1,d.length))?2:-2;if(/^[T]{1}[A-Z0-9]{8}$/.test(d))return t.charAt(8)==/^[T]{1}[A-Z0-9]{8}$/.test(d)?3:-3;if(/^[XYZ]{1}/.test(d))return d=d.replace("X","0"),d=d.replace("Y","1"),d=d.replace("Z","2"),i=d.substring(0,8)%23,t.toUpperCase().charAt(8)==l.substring(i,i+1)?3:-3}return 0},Validate.prototype.cleanMsgError=function(t){~t.indexOf("fn_")&&(t="fec_nac"),$("#"+t+"_msgError_Layer").html(""),$("#"+t).css({"border-color":"#333"})},Validate.prototype.appendHtml=function(t,e,r,a){if("undefined"!=typeof r){if("undefined"==typeof a&&(a=!0),0===$("#"+e+"_msgError_Layer").length){var n="<span class='error' id='"+e+"_msgError_Layer'>&nbsp;&nbsp;"+r+"</span>";t.append(n)}else $("#"+e+"_msgError_Layer").html(r);a&&$("#"+e).css({border:"1px solid #F00"})}},Validate.prototype.restoreErrorLayer=function(t){0!==$("#"+t+"_msgError_Layer").length&&($("#"+t+"_msgError_Layer").remove(),$("#"+t).css({border:"1px solid #CCC"}))},Validate.prototype.requiredFields=function(){$("[data-required=true]").each(function(){var t=document.createElement("span");t.className="asterisco",t.innerHTML="*",$(this).siblings("label").append(t)})},Validate.prototype.validateFields=function(){var t=0,e=this;return $("[data-validated]").each(function(){var r=$(this).val(),a=$(this).attr("data-validated");e.validate(r,a)||(e.addWarnMesg($(this),"valor incorrecto"),t++,$(this).off("blur").on("blur",function(){var t=$(this).val(),r=$(this).attr("data-validated");if(""!==e.validate(t,r)){var a=$(this).attr("name");$("#warning-"+a).remove(),$("[name='"+a+"']").removeClass("warningField")}}))}),0===t},Validate.prototype.noEmptyFields=function(){var t=0,e=this;return $("[data-required=true]").each(function(){var r=$(this).val(),a=$(this).attr("name");$("#warning-"+a).remove(),$(this).removeClass("warningField"),""===r&&(e.addWarnMesg($(this),"campo requerido"),t++,$(this).off("blur").on("blur",function(){""!==$(this).val()&&($("#warning-"+a).remove(),$("[name='"+a+"']").removeClass("warningField"))}))}),0===t},Validate.prototype.addWarnMesg=function(t,e){var r=document.createElement("div"),a=t.attr("name");r.className="warning",r.innerHTML=e,r.id="warning-"+a,t.parent().append(r),t.addClass("warningField")},Validate}();
