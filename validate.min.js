/* validate.js library by @manufosela - 2015. Works IE8+, FF, Chrome. MIT License (MIT) Copyright (c) 2015 @manufosela - It is independent of any library or framework */
var Validate=function(){"use strict";return Validate=function(){this.badValue=0,this.warningColor="#F60";for(var t,e,r,a,n=this,i=document.querySelectorAll("form[data-validate=true]"),o=0,s=i.length,u=0,c=function(t){t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,t=t||window.event;var e=t.target||t.srcElement,i=e.formParam;return n.noEmptyFields()&&(r=!0),n.validateFields()&&(a=!0),r&&a&&n._triggerEvent(i,"submit"),!1};s>o;o++)for(this.markRequiredFields(i[o]),this.checkFieldsRealTime(i[o]),t=i[o].querySelectorAll("[type=submit][data-checkform=true]"),e=t.length,r=!1,a=!1;e>u;u++){var l=t[u];l.formParam=i[o],this._on(l,"click",c)}},Validate.prototype.validate=function(t,e){if(""===t&&null===t&&"noempty"!=e)return!0;switch(e){case"int":case"integer":return this.isInt(t);case"float":return this.isFloat(t);case"number":case"numero":return this.isNumber(t);case"alpha":case"alfa":case"text":case"texto":return this.isAlpha(t);case"text-":return this.isAlphaGuion(t);case"alphaNumericSpace":case"textspace":return this.isAlphaNumericSpace(t);case"alphaNumeric":case"textnum":return this.isAlphaNumeric(t);case"email":return this.isEmail(t);case"iccid":return this.checkICCID(t);case"nummovil":case"movil":return this.checkNumMovil(t);case"numfijo":case"fijo":return this.checkNumFijo(t);case"telefono":case"tel":return this.checkTelephoneNumber(t);case"cp":return this.checkCodPostal(t);case"cuentabancaria":return this.verificaCuentaBancaria(t);case"tarjetacredito":return this.verificaNumTarjetaCredito(t);case"nif":case"cif":case"nie":return valida_nif_cif_nie(t);case"fecha":return isDate(t,"dmy");case"selected":case"noempty":return""!==t;case"checked":return"true"==$(this).prop("checked")}return!1},Validate.prototype.isInt=function(t){return t==parseInt(t)},Validate.prototype.isFloat=function(t){return t==parseFloat(t)},Validate.prototype.isNumber=function(t){var e=/^[0-9\.]+$/;return e.test(t)},Validate.prototype.isEmail=function(t){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(t)},Validate.prototype.verificaCuentaBancaria=function(t){for(var e="00"+t.substr(0,8),r=t.substr(8,2),a=t.substr(10),n=new Array(1,2,4,8,5,10,9,7,3,6),i=0,o=0,s=0;9>=s;s++)i+=parseInt(e.charAt(s))*n[s];for(i=11-i%11,11==i&&(i=0),10==i&&(i=1),s=0;9>=s;s++)o+=parseInt(a.charAt(s))*n[s];return o=11-o%11,11==o&&(o=0),10==o&&(o=1),i.toString()+o.toString()==r},Validate.prototype.verificaNumTarjetaCredito=function(t){var e=!1,r=3==t[0]||4==t[0]||5==t[0]||6==t[0];return 16==t.length&&r&&(e=this._getCtrlNumberCreditCard(t)==t[15]),e},Validate.prototype._getCtrlNumberCreditCard=function(t){var e,r,a=0;for(e=1;16>e;e++)e/2!==parseInt(e/2)?(r=2*parseInt(t[e-1]),r>=10&&(r-=9)):r=parseInt(t[e-1]),a+=r;return a=10-a%10,10===a&&(a=0),a},Validate.prototype.isAlpha=function(t){var e=/^[A-Za-z\s\xF1\xD1áéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\']+$/,r=e.test(t);return r},Validate.prototype.isAlphaGuion=function(t){var e=/^[A-Za-z\s\xF1\xD1áéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\'\-]+$/,r=e.test(t);return r},Validate.prototype.isAlphaNumeric=function(t){var e=/^[0-9A-Za-záéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\']+$/,r=e.test(t);return r},Validate.prototype.isAlphaNumericSpace=function(t){var e=/^[0-9A-Za-z\s\xF1\xD1áéíóúÁÉÍÓÚäëïöüAËÏÖÜÑñ\']+$/,r=e.test(t);return r},Validate.prototype.isDate=function(t,e){var r=t;if(""===r)return!1;var a=/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/,n=r.match(a);if(null===n)return!1;switch(e){case"mdy":dtMonth=n[1],dtDay=n[3],dtYear=n[5];break;case"ymd":dtYear=n[1],dtMonth=n[5],dtDay=n[7];break;default:dtDay=n[1],dtMonth=n[3],dtYear=n[5]}if(dtMonth<1||dtMonth>12)return!1;if(dtDay<1||dtDay>31)return!1;if((4==dtMonth||6==dtMonth||9==dtMonth||11==dtMonth)&&31==dtDay)return!1;if(2==dtMonth){var i=dtYear%4===0&&(dtYear%100!==0||dtYear%400===0);if(dtDay>29||29==dtDay&&!i)return!1}return!0},Validate.prototype.checkNumMovil=function(t){var e=/^[67]\d{8}$/,r=new RegExp(e);return r.test(t)?1:0},Validate.prototype.checkNumFijo=function(t){var e=/^[89]\d{8}$/,r=new RegExp(e);return r.test(t)?1:0},Validate.prototype.checkTelephoneNumber=function(t){return this.checkNumFijo(t)||this.checkNumMovil(t)?1:-2},Validate.prototype.checkCodPostal=function(t){return 5==t.length&&this.isInt(t)},Validate.prototype.checkICCID=function(t){var e=parseInt(t.substring(t.length-1,t.length)),r=t.substring(0,t.length-1);return"89"!=t.substring(0,2)?0:this._CalculateLuhn(r)==parseInt(e)&&(19==t.length||20==t.length)?1:0},Validate.prototype._CalculateLuhn=function(t){var e=0;for(i=0;i<t.length;i++)e+=parseInt(t.substring(i,i+1));var r=new Array(0,1,2,3,4,-4,-3,-2,-1,0);for(i=t.length-1;i>=0;i-=2){var a=parseInt(t.substring(i,i+1)),n=r[a];e+=n}var o=e%10;return o=10-o,10==o&&(o=0),o},Validate.prototype.calcDigitoControl2LineaNIF=function(t){for(var e=[7,3,1],r=0,a=0,n=t.length;n>r;r++)a+=t[r]*e[r%3];return a%10},Validate.prototype._getLetraNIF=function(t){var e="TRWAGMYFPDXBNJZSQVHLCKE",r=t%23,a=e.charAt(r);return a},Validate.prototype.valida_nif_cif_nie=function(t){var e,r,a,n,i,o,s,u,c,l=t.toUpperCase(),d="TRWAGMYFPDXBNJZSQVHLCKE";if("PASAPORTE"==$("#documento_de_identidad").val())return 1;if(""!==l){if(!/^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$/.test(l)&&!/^[T]{1}[A-Z0-9]{8}$/.test(l)&&!/^[0-9]{8}[A-Z]{1}$/.test(l))return 0;if(/^[0-9]{8}[A-Z]{1}$/.test(l))return o=t.substring(8,0)%23,s=d.charAt(o),u=l.charAt(8),s==u?1:-1;for(c=parseInt(t.charAt(2))+parseInt(t.charAt(4))+parseInt(t.charAt(6)),a=1;8>a;a+=2)e=2*parseInt(t.charAt(a)),e+="",e=e.substring(0,1),r=2*parseInt(t.charAt(a)),r+="",r=r.substring(1,2),""===r&&(r="0"),c+=parseInt(e)+parseInt(r);if(c+="",n=10-parseInt(c.substring(c.length-1,c.length)),/^[KLM]{1}/.test(l))return t.charAt(8)==String.fromCharCode(64+n)?1:-1;if(/^[ABCDEFGHJNPQRSUVW]{1}/.test(l))return l=n+"",t.charAt(8)==String.fromCharCode(64+n)||t.charAt(8)==parseInt(l.substring(l.length-1,l.length))?2:-2;if(/^[T]{1}[A-Z0-9]{8}$/.test(l))return t.charAt(8)==/^[T]{1}[A-Z0-9]{8}$/.test(l)?3:-3;if(/^[XYZ]{1}/.test(l))return l=l.replace("X","0"),l=l.replace("Y","1"),l=l.replace("Z","2"),i=l.substring(0,8)%23,t.toUpperCase().charAt(8)==d.substring(i,i+1)?3:-3}return 0},Validate.prototype.cleanMsgError=function(t){~t.indexOf("fn_")&&(t="fec_nac"),$("#"+t+"_msgError_Layer").html(""),$("#"+t).css({"border-color":"#333"})},Validate.prototype.appendHtml=function(t,e,r,a){if("undefined"!=typeof r){if("undefined"==typeof a&&(a=!0),0===$("#"+e+"_msgError_Layer").length){var n="<span class='error' id='"+e+"_msgError_Layer'>&nbsp;&nbsp;"+r+"</span>";t.append(n)}else $("#"+e+"_msgError_Layer").html(r);a&&$("#"+e).css({border:"1px solid #F00"})}},Validate.prototype.restoreErrorLayer=function(t){0!==$("#"+t+"_msgError_Layer").length&&($("#"+t+"_msgError_Layer").remove(),$("#"+t).css({border:"1px solid #CCC"}))},Validate.prototype.markRequiredFields=function(t,e){if("undefined"==typeof t)return!1;e="undefined"!=typeof e?e:"*";for(var r,a,n=this,i=t.querySelectorAll("[data-required=true]"),o=0,s=i.length;s>o;o++)r=document.createElement("span"),r.className="asterisco",r.innerHTML=e,a=n._getAllSiblings(i[o],"LABEL"),a[0].appendChild(r)},Validate.prototype.validateFields=function(){this.badValue=0;for(var t,e,r=this,a=document.querySelectorAll("[data-tovalidate]"),n=0,i=a.length;i>n;n++)t=a[n].getAttribute("value")||a[n].value||"",e=a[n].getAttribute("data-tovalidate")||"",r.validate(t,e)||this.badValue++;return 0===this.badValue},Validate.prototype.noEmptyFields=function(){for(var t,e,r=this,a=0,n=document.querySelectorAll("[data-required=true]"),i=0,o=n.length;o>i;i++)t=n[i].getAttribute("value")||n[i].value||"",e=n[i].getAttribute("type")||n[i].type||"","radiobutton"==e||"checkbox"==e?n[i].checked||(r.addWarnMesg(n[i],"campo requerido"),a++):""===t&&(r.addWarnMesg(n[i],"campo requerido"),a++);return 0===a},Validate.prototype.addWarnMesg=function(t,e){var r=document.createElement("p"),a="undefined"!=typeof t.getAttribute?t:window.event.srcElement,n=a.getAttribute("name"),i="warning-"+n;document.getElementById(i)||(t=document.getElementById(a.getAttribute("id")||t.id),r.className="text-warning",r.id=i,r.innerHTML=e,t.parentElement.appendChild(r),t.setAttribute("style","border:2px solid "+this.warningColor+"!important;"))},Validate.prototype.delWarnMesg=function(t){var e="undefined"!=typeof t.getAttribute?t:window.event.srcElement,r=e.getAttribute("name")||"";document.getElementById("warning-"+r)&&e.parentElement.removeChild(document.getElementById("warning-"+r)),this.removeStyle(t)},Validate.prototype.hasClass=function(t,e){var r=new RegExp("(\\s|^)"+e+"(\\s|$)"),a="undefined"==typeof t.className?window.event.srcElement:t;return a.className.match(r)},Validate.prototype.addClass=function(t,e){if(!this.hasClass(t,e)){var r="undefined"!=typeof t.getAttribute?t:window.event.srcElement,a=""!==r.className?" ":"";r.className+=a+e}},Validate.prototype.removeClass=function(t,e){if(this.hasClass(t,e)){var r=new RegExp("(\\s|^)"+e+"(\\s|$)"),a="undefined"!=typeof t.getAttribute?t:window.event.srcElement;a.className=a.className.replace(r,"")}},Validate.prototype.removeStyle=function(t){var e="undefined"!=typeof t.getAttribute?t:window.event.srcElement;e.setAttribute("style","")},Validate.prototype.checkFieldsRealTime=function(t){for(var e,r,a,n,i=this,o=this._getArrayFromTag(t,"input"),s=this._getArrayFromTag(t,"textarea"),u=this._getArrayFromTag(t,"select"),c="undefined"!=typeof s?o.concat(s):o,l=0,d=c.length,p=function(t){t=t||window.event;var e=t.target||t.srcElement,r=e.value||e.getAttribute("value")||"",a=e["data-tovalidate"]||e.getAttribute("data-tovalidate")||"",n=e["data-required"]||e.getAttribute("data-required")||"",o="true"==n,s=""!==a,u=e.type||e.getAttribute("type")||"";if(o)if("radiobutton"==u||"checkbox"==u){if(!this.checked)return i.addWarnMesg(this,"campo requerido"),!0;i.delWarnMesg(this)}else{if(""===r)return i.addWarnMesg(this,"campo requerido"),!0;i.delWarnMesg(this)}s&&(i.validate(r,a)?i.delWarnMesg(this):(i.badValue++,i.addWarnMesg(this,"valor incorrecto")))};d>l;l++)e=document.getElementById(c[l].getAttribute("id")),r=e.getAttribute("data-required"),a=e.getAttribute("data-tovalidate"),n=e.getAttribute("type")||e.type||"",("true"==r||""!==a)&&(i._off(e,"blur",p),i._on(e,"blur",p),("checkbox"==n||"radiobutton"==n)&&i._on(e,"click",p));l=0,d=u.length},Validate.prototype._on=function(t,e,r){window.addEventListener?t.addEventListener(e,r,!1):window.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r},Validate.prototype._off=function(t,e,r){window.removeEventListener?t.removeEventListener(e,r,!1):window.detachEvent?t.detachEvent("on"+e,r):elem["on"+e]=null},Validate.prototype._triggerEvent=function(t,e){var r;document.createEvent?(r=document.createEvent("MouseEvents"),r.initEvent(e,!0,!0)):(r=document.createEventObject(),r.eventType=e),r.eventName=e,document.createEvent?t.dispatchEvent(r):t.fireEvent("on"+r.eventType,r)},Validate.prototype._toType=function(t){if("undefined"==typeof t)return"undefined";if(null===t)return"null";var e=Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]||"";switch(e){case"Number":return isNaN(t)?"nan":"number";case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return e.toLowerCase()}return"object"==typeof t?"object":void 0},Validate.prototype._getArrayFromTag=function(t,e){return Array.prototype.slice.call(t.getElementsByTagName(e))},Validate.prototype._getAllSiblings=function(t,e){var r=[],a=function(t){return"undefined"!=typeof t.tagName?t.tagName.toUpperCase()==e.toUpperCase():!1},n=t.parentNode;t=n.firstChild;do(!a||a(t))&&r.push(t);while(t=t.nextSibling);return 0===r.length&&r.push(n),r},Validate.prototype._elementChildren=function(t){for(var e=t.childNodes,r=[],a=e.length;a--;)1==e[a].nodeType&&r.unshift(e[a]);return r},Validate}();!function(){"use strict";var t=Array.prototype.slice;try{t.call(document.documentElement)}catch(e){Array.prototype.slice=function(e,r){if(r="undefined"!=typeof r?r:this.length,"[object Array]"===Object.prototype.toString.call(this))return t.call(this,e,r);var a,n,i=[],o=this.length,s=e||0;s=s>=0?s:Math.max(0,o+s);var u="number"==typeof r?Math.min(r,o):o;if(0>r&&(u=o+r),n=u-s,n>0)if(i=new Array(n),this.charAt)for(a=0;n>a;a++)i[a]=this.charAt(s+a);else for(a=0;n>a;a++)i[a]=this[s+a];return i}}}();
